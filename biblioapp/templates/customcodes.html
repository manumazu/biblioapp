{% extends "layout.html" %}
{% block title %}Custom Messages{% endblock %}
{% block styles %}
    {{super()}}
{% endblock %}

{% block body %}

{% block navbar %}
    {{super()}}
{% endblock %}

{% block content %}
	<div class="container">
		
	<h1 class="mt-5 text-white font-weight-light">Display leds on your way !</h1>

	<p>Learn how programming with your leds : each step of your code can be easily controlled on the strips.</p>

	{% if customcodes %}
		<h2>List of your codes</h2>

		<table class="table table-hover">
		<thead>
		    <tr class="table-light">
		      <th scope="col">Type</th>
		      <th scope="col">Title</th>
		      <th scope="col">Description</th>
		      <th scope="col">Variables</th>
		      <th scope="col">Updated</th>
		    </tr>
		</thead>
		<tbody>
		{% for customcode in customcodes %}
		    <tr class="table-secondary{% if customcode['published']==0 %} text-muted{% endif %}">
		      <th scope="row">#{{ customcode['id'] }}</th>
		      <td><a href="{{ url_for('customCode', code_id=customcode['id']) }}">{{ customcode['title'] }}</td>
		      <td>{{ customcode['description'] }}</td>
		      <td>
		      {% if customcode['customvars'] %}
			      {% set customvars = json.loads(customcode['customvars']) %}
			      <ul>
			      {% for customvar in customvars %}
			       <li>{{customvar}} : {{ customvars[customvar] }} </li>
			      {% endfor %}
			      </ul>
		      {% endif %}
		  	  </td>
		  	  <td>{{ customcode['date_upd'].strftime('%Y-%m-%d') }}
		    </tr>
		{% endfor %}
			</tbody> 
		</table>
	{% endif %}

	<div class="jumbotron">

	  	{% include '_customcode_sample.html' %}
	  
	</div>

	{{ super() }}
	</div>
{% endblock %}

{% block scripts %}
  {{super()}}
   <script src="{{url_for('static', filename='customcodes.js')}}" async=""></script>
{% endblock %}

{% endblock %}
